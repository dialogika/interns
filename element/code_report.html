<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Management - Premium Dashboard</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-teal: #2d5a52;
            --bg-light: #f4f7f9;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
        }

        body { 
            background-color: var(--bg-light); 
            font-family: 'Inter', sans-serif;
            color: #1e293b;
        }

        .card { border: none; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }

        /* Top Header Badge */
        .count-badge { background: #0f172a; color: white; font-size: 0.7rem; padding: 2px 8px; border-radius: 20px; vertical-align: middle; }

        /* Buttons */
        .btn-teal { background-color: var(--primary-teal); color: white; border: none; font-size: 14px; padding: 8px 16px; }
        .btn-teal:hover { background-color: #234741; color: white; }
        .btn-approve-all { background-color: #0f172a; color: white; border: none; font-size: 14px; }

        /* Stats Section */
        .stat-label { font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
        .stat-value { font-size: 24px; font-weight: 700; color: #0f172a; }
        .stat-diff { font-size: 10px; font-weight: 600; }
        .diff-up { color: #0ea5e9; }
        .diff-down { color: #f43f5e; }

        /* Table Sizing & Styling */
        .table { table-layout: fixed; width: 100%; }
        /* Kolom berukuran kecil (lebar tetap) */
        .col-team { width: 180px; }
        .col-type { width: 130px; }
        .col-date { width: 140px; }
        .col-task { width: 160px; }
        .col-files { width: 130px; }
        .col-action { width: 140px; }
        /* Kolom Report akan fleksibel mengambil sisa ruang */

        .table thead th {
            background-color: #ffffff;
            color: var(--text-muted);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            padding: 15px 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .table tbody tr { cursor: pointer; transition: background 0.2s; }
        .table tbody tr:hover { background-color: #f8fafc !important; }
        .table tbody td { padding: 12px; vertical-align: middle; font-size: 13px; border-bottom: 1px solid #f1f5f9; }

        /* Quest Type Badges */
        .badge-quest { font-size: 10px; padding: 4px 8px; border-radius: 6px; font-weight: 600; }
        .badge-main { background: #dbeafe; color: #1e40af; }
        .badge-side { background: #fef3c7; color: #92400e; }
        .badge-project { background: #f3e8ff; color: #6b21a8; }

        /* Rich Text Preview Column */
        .rich-text-preview {
            background: #f1f5f9;
            color: #475569;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 12px;
            border-left: 3px solid var(--primary-teal);
            font-style: italic;
        }

        .text-truncate-custom { display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* Modal Styles */
        .modal-content { border-radius: 15px; border: none; }
        .modal-header { border-bottom: 1px solid #f1f5f9; }
    </style>
</head>
<body class="py-4">

<div class="container-fluid px-4">
    <!-- TOP HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="fw-bold d-inline-block me-2 mb-0">Report Management</h4>
            <span class="count-badge">551</span>
        </div>
        <button class="btn btn-teal rounded-3 shadow-sm">
            <i class="fas fa-plus-circle me-1"></i> Add Side Quest
        </button>
    </div>

    <!-- STATS CARDS -->
    <div class="row g-3 mb-4">
        <div class="col-lg-6">
            <div class="card p-4 h-100">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h6 class="fw-bold mb-0 text-secondary"><i class="far fa-check-circle text-primary me-2"></i> Approval Status</h6>
                    <i class="fas fa-ellipsis-h text-muted"></i>
                </div>
                <div class="row">
                    <div class="col-3">
                        <div class="stat-label">Requested</div>
                        <div class="stat-value">265</div>
                        <div class="stat-diff diff-up">+ 12 vs yesterday</div>
                    </div>
                    <div class="col-3 border-start ps-4">
                        <div class="stat-label">Approved</div>
                        <div class="stat-value">3</div>
                        <div class="stat-diff diff-down">- 6 vs yesterday</div>
                    </div>
                    <div class="col-3 border-start ps-4">
                        <div class="stat-label">Rejected</div>
                        <div class="stat-value">4</div>
                        <div class="stat-diff diff-down">- 2 vs yesterday</div>
                    </div>
                    <div class="col-3 border-start ps-4">
                        <div class="stat-label">Pending</div>
                        <div class="stat-value">18</div>
                        <div class="stat-diff diff-down">- 6 vs yesterday</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card p-4 h-100">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold mb-0 text-secondary"><i class="far fa-clock text-primary me-2"></i> Quest Type Breakdown</h6>
                    <i class="fas fa-ellipsis-h text-muted"></i>
                </div>
                <div class="mt-2">
                    <div class="d-flex align-items-center mb-2">
                        <span class="stat-label" style="width: 100px;">Main Quest</span>
                        <div class="flex-grow-1 mx-3"><div class="progress" style="height: 6px;"><div class="progress-bar bg-primary" style="width: 45%"></div></div></div>
                        <span class="fw-bold small">21</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <span class="stat-label" style="width: 100px;">Side Quest</span>
                        <div class="flex-grow-1 mx-3"><div class="progress" style="height: 6px;"><div class="progress-bar bg-warning" style="width: 70%"></div></div></div>
                        <span class="fw-bold small">30</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="stat-label" style="width: 100px;">Project</span>
                        <div class="flex-grow-1 mx-3"><div class="progress" style="height: 6px;"><div class="progress-bar bg-purple" style="width: 60%; background-color: #a855f7;"></div></div></div>
                        <span class="fw-bold small">28</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FILTERS -->
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-3">
        <div class="d-flex gap-2">
            <div class="position-relative">
                <i class="fas fa-search position-absolute text-muted" style="left: 12px; top: 10px; font-size: 13px;"></i>
                <input type="text" class="form-control ps-5 rounded-3 border-light shadow-sm" style="width: 280px; font-size: 13px;" placeholder="Search Report Quest">
            </div>
            <select class="form-select rounded-3 border-light shadow-sm" style="width: 150px; font-size: 13px;">
                <option>Month Period</option>
            </select>
        </div>
        <button class="btn btn-approve-all px-3 py-2 rounded-3 shadow-sm">
            <i class="fas fa-check-double me-1"></i> Approve all
        </button>
    </div>

    <!-- DATA TABLE -->
    <div class="card shadow-sm overflow-hidden border">
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead>
                    <tr>
                        <th class="col-team px-4">Team</th>
                        <th class="col-type">Type</th>
                        <th class="col-date">Date</th>
                        <th class="col-task">Task</th>
                        <th>Report</th>
                        <th class="col-files">Files</th>
                        <th class="col-action text-center">Action</th>
                    </tr>
                </thead>
                <tbody class="bg-white">
                    <!-- Row 1 -->
                    <tr onclick="openModal('Bagus Fikri', 'Main Quest', 'API Integration for Stripe', 'Successfully integrated <strong>Stripe Payment</strong> for recurring subscriptions. Handled webhooks and <em>3D Secure</em> authentication flow. Ready for QA review.')">
                        <td class="px-4">
                            <div class="d-flex align-items-center">
                                <img src="https://i.pravatar.cc/150?u=bagus" class="rounded-circle me-2" width="30" height="30">
                                <span class="fw-bold text-truncate-custom" data-bs-toggle="tooltip" title="Bagus Fikri">Bagus Fikri</span>
                            </div>
                        </td>
                        <td><span class="badge-quest badge-main">Main Quest</span></td>
                        <td><span class="text-muted small">2023-12-26</span></td>
                        <td><span class="fw-medium text-truncate-custom" data-bs-toggle="tooltip" title="API Integration for Stripe Payment">API Integration...</span></td>
                        <td>
                            <div class="rich-text-preview text-truncate-custom" data-bs-toggle="tooltip" title="Successfully integrated Stripe Payment for recurring subscriptions. Handled webhooks...">
                                Successfully integrated Stripe Payment...
                            </div>
                        </td>
                        <td><a href="#" class="text-primary text-decoration-none small text-truncate-custom" data-bs-toggle="tooltip" title="API-Documentation.pdf"><i class="far fa-file-pdf me-1"></i> Doc.pdf</a></td>
                        <td>
                            <div class="d-flex justify-content-center gap-1" onclick="event.stopPropagation();">
                                <button class="btn btn-outline-danger btn-sm px-2 rounded-2"><i class="fas fa-times"></i></button>
                                <button class="btn btn-teal btn-sm px-2 rounded-2">Approve</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Row 2 -->
                    <tr onclick="openModal('Raihan Fikri', 'Project Quest', 'Mobile App Redesign', 'Working on the <strong>new onboarding flow</strong>. Replaced old icons with SVG components and adjusted font sizes for better <em>UI/UX</em> on small devices.')">
                        <td class="px-4">
                            <div class="d-flex align-items-center">
                                <img src="https://i.pravatar.cc/150?u=raihan" class="rounded-circle me-2" width="30" height="30">
                                <span class="fw-bold text-truncate-custom" data-bs-toggle="tooltip" title="Raihan Fikri">Raihan Fikri</span>
                            </div>
                        </td>
                        <td><span class="badge-quest badge-project">Project Quest</span></td>
                        <td><span class="text-muted small">2023-12-25</span></td>
                        <td><span class="fw-medium text-truncate-custom" data-bs-toggle="tooltip" title="Mobile App Onboarding Redesign">Mobile App...</span></td>
                        <td>
                            <div class="rich-text-preview text-truncate-custom" data-bs-toggle="tooltip" title="Working on the new onboarding flow. Replaced old icons with SVG...">
                                Working on new onboarding...
                            </div>
                        </td>
                        <td><a href="#" class="text-primary text-decoration-none small text-truncate-custom" data-bs-toggle="tooltip" title="UI-Design-Final.zip"><i class="far fa-file-archive me-1"></i> Assets.zip</a></td>
                        <td>
                            <div class="d-flex justify-content-center gap-1" onclick="event.stopPropagation();">
                                <button class="btn btn-outline-danger btn-sm px-2 rounded-2"><i class="fas fa-times"></i></button>
                                <button class="btn btn-teal btn-sm px-2 rounded-2">Approve</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- MODAL DETAIL -->
<div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg">
            <div class="modal-header bg-light">
                <h6 class="modal-title fw-bold">Report Details</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <div class="mb-3">
                    <label class="stat-label mb-1">Team Member</label>
                    <div id="mUser" class="fw-bold text-primary"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-6">
                        <label class="stat-label mb-1">Quest Type</label>
                        <div id="mType"></div>
                    </div>
                    <div class="col-6">
                        <label class="stat-label mb-1">Task Title</label>
                        <div id="mTask" class="fw-medium"></div>
                    </div>
                </div>
                <hr>
                <div>
                    <label class="stat-label mb-2">Report Content</label>
                    <div id="mReport" class="p-3 rounded-3 bg-light border-start border-4 border-success" style="font-size: 14px; line-height: 1.6;"></div>
                </div>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary btn-sm px-3" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-teal btn-sm px-4">Approve Task</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Initialize Tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

    // Modal Controller
    const detailModal = new bootstrap.Modal(document.getElementById('detailModal'));

    function openModal(user, type, task, report) {
        document.getElementById('mUser').innerText = user;
        document.getElementById('mTask').innerText = task;
        document.getElementById('mReport').innerHTML = report;
        
        // Handle Badge Display in Modal
        let badgeClass = 'badge-quest ';
        if(type === 'Main Quest') badgeClass += 'badge-main';
        else if(type === 'Side Quest') badgeClass += 'badge-side';
        else badgeClass += 'badge-project';
        
        document.getElementById('mType').innerHTML = `<span class="${badgeClass}">${type}</span>`;
        
        detailModal.show();
    }
</script>
</body>
</html>